{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/jh45583/sei/projects/project4/Project-4-FrontEnd/project4-frontend/src/RestaurantDetail.js\";\nimport { render } from '@testing-library/react';\nimport React, { Component } from 'react';\nimport { Route, Link, Switch, Redirect } from 'react-router-dom';\nimport './RestaurantDetail.css';\nimport RestaurantMenu from './RestaurantMenu';\nimport Cart from './Cart';\nimport Axios from 'axios';\nexport default class RestaurantDetail extends Component {\n  constructor() {\n    super();\n\n    this.addOrder = async () => {\n      // let response = await Axios.get(\n      //     'http://localhost:3001/api/restaurants/'\n      // )\n      // console.log(response.data.users)\n      let restarray = this.state.restaurants;\n      let userid = this.props.userid;\n      this.state.cart.map(async line => {\n        let restaurantid = 0; // console.log(line)\n\n        let restinfo = restarray.find(b => {\n          return b.name == line.resname;\n        }); // console.log(restinfo.id)\n\n        let newresponse = await Axios.post('http://localhost:3001/api/order', {\n          userId: userid,\n          restaurantId: restinfo.id,\n          carrierId: 1,\n          item: line.name,\n          price: line.price,\n          isDelivered: false\n        });\n      });\n      this.setState({\n        orderCompleted: true\n      });\n      this.setState({\n        cart: []\n      });\n      console.log('completed');\n    };\n\n    this.addNewRestaurant = async e => {\n      let response = await Axios.post('http://localhost:3001/api/restaurants/', {\n        name: this.props.restaurant.restaurant_name,\n        username: this.props.restaurant.restaurant_name,\n        password: this.props.restaurant.restaurant_name,\n        account: 0,\n        address: this.props.restaurant.address.formatted\n      });\n      console.log('Restaurant added');\n    };\n\n    this.checkRestaurant = async e => {\n      // e.preventDefault();\n      let response = await Axios.get('http://localhost:3001/api/restaurants/');\n      let reslist = response.data.users;\n      this.setState({\n        restaurants: reslist\n      });\n      let name = this.props.restaurant.restaurant_name;\n      const favoriteBook = reslist.find(b => {\n        return b.name == name;\n      });\n\n      if (typeof favoriteBook === 'undefined') {\n        this.addNewRestaurant();\n      } else {\n        console.log('restaurant there');\n      }\n    };\n\n    this.state = {\n      isClicked: false,\n      menu: '',\n      cart: [],\n      restaurant: '',\n      orderCompleted: false,\n      restaurants: ''\n    };\n    this.getList = this.getList.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n  }\n\n  getList(i) {\n    this.setState({\n      isClicked: false\n    });\n    this.setState({\n      isClicked: true\n    });\n    let list = this.props.restaurant.menus[0].menu_sections[i.target.id].menu_items;\n    this.setState({\n      menu: list\n    });\n  }\n\n  addToCart(i) {\n    let item = this.state.menu[i.target.id];\n    item.resname = this.props.restaurant.restaurant_name; // console.log(item)\n\n    let cart = this.state.cart;\n    let newCart = cart.push(item); // console.log(cart)\n\n    this.setState({\n      cart: cart\n    });\n    this.checkRestaurant();\n  }\n\n  render() {\n    let menus = this.props.restaurant.menus[0].menu_sections;\n    const menuList = menus.map((menu, index) => {\n      return /*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: this.getList,\n        id: index,\n        children: menu.section_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menulist\",\n        children: menuList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu\",\n        children: /*#__PURE__*/_jsxDEV(RestaurantMenu, {\n          isClicked: this.state.isClicked,\n          menu: this.state.menu,\n          addToCart: this.addToCart,\n          addRestaurant: this.addRestaurant,\n          orderCompleted: this.state.orderCompleted\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"CART\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Cart, {\n          cart: this.state.cart,\n          restaurant: this.props.restaurant,\n          checkout: this.addOrder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/jh45583/sei/projects/project4/Project-4-FrontEnd/project4-frontend/src/RestaurantDetail.js"],"names":["render","React","Component","Route","Link","Switch","Redirect","RestaurantMenu","Cart","Axios","RestaurantDetail","constructor","addOrder","restarray","state","restaurants","userid","props","cart","map","line","restaurantid","restinfo","find","b","name","resname","newresponse","post","userId","restaurantId","id","carrierId","item","price","isDelivered","setState","orderCompleted","console","log","addNewRestaurant","e","response","restaurant","restaurant_name","username","password","account","address","formatted","checkRestaurant","get","reslist","data","users","favoriteBook","isClicked","menu","getList","bind","addToCart","i","list","menus","menu_sections","target","menu_items","newCart","push","menuList","index","section_name","addRestaurant"],"mappings":"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","sourcesContent":["import { render } from '@testing-library/react'\nimport React, { Component } from 'react'\nimport {Route, Link, Switch, Redirect} from 'react-router-dom'\nimport './RestaurantDetail.css'\nimport RestaurantMenu from './RestaurantMenu'\nimport Cart from './Cart'\nimport Axios from 'axios'\n\nexport default class RestaurantDetail extends Component{\n    constructor(){\n        super()\n        this.state ={\n            isClicked: false,\n            menu: '',\n            cart: [],\n            restaurant: '',\n            orderCompleted: false,\n            restaurants: ''\n        }\n        this.getList = this.getList.bind(this);\n        this.addToCart = this.addToCart.bind(this);\n    }\naddOrder = async ()=>{\n    // let response = await Axios.get(\n    //     'http://localhost:3001/api/restaurants/'\n    // )\n    // console.log(response.data.users)\n    let restarray = this.state.restaurants\n    let userid = this.props.userid\n    this.state.cart.map(async(line)=>{\n        let restaurantid = 0;\n        // console.log(line)\n        let restinfo = restarray.find((b) => { return b.name == line.resname;})\n        // console.log(restinfo.id)\n        let newresponse = await Axios.post(\n            'http://localhost:3001/api/order',\n            {\n                userId: userid,\n                restaurantId: restinfo.id,\n                carrierId: 1,\n                item: line.name,\n                price:line.price,\n                isDelivered: false,\n                \n\n            }\n        )\n    })\n    this.setState({orderCompleted: true})\n    this.setState({cart: []})\n    console.log('completed')\n}\ngetList(i){\n    this.setState({isClicked:false})\n    this.setState({isClicked: true})\n    let list = this.props.restaurant.menus[0].menu_sections[i.target.id].menu_items\n    this.setState({menu: list})\n}\naddToCart(i){\n    let item = this.state.menu[i.target.id]\n    \n    item.resname = this.props.restaurant.restaurant_name\n    // console.log(item)\n    let cart = this.state.cart\n    let newCart = cart.push(item)\n    // console.log(cart)\n    this.setState({cart: cart})\n    this.checkRestaurant();\n   \n\n}\naddNewRestaurant = async (e)=>{\n    let response = await Axios.post(\n        'http://localhost:3001/api/restaurants/',\n        {\n            name: this.props.restaurant.restaurant_name,\n            username: this.props.restaurant.restaurant_name,\n            password: this.props.restaurant.restaurant_name,\n            account: 0,\n            address: this.props.restaurant.address.formatted\n        }\n    )\n    console.log('Restaurant added')\n}\ncheckRestaurant = async (e)=>{\n    // e.preventDefault();\n    let response = await Axios.get(\n        'http://localhost:3001/api/restaurants/'\n    )\n    \n    let reslist = response.data.users\n    this.setState({restaurants: reslist})\n    let name = this.props.restaurant.restaurant_name\n    const favoriteBook = reslist.find((b) => { return b.name == name;});\n    if(typeof favoriteBook === 'undefined'){\n        this.addNewRestaurant();\n    }else{\n        console.log('restaurant there')\n    }\n}\nrender(){\n    let menus = this.props.restaurant.menus[0].menu_sections\n    const menuList = menus.map((menu, index)=>{\n    return(\n        \n            <a onClick = {this.getList} id ={index}>{menu.section_name}</a>\n        \n    )\n    })\n    \n    return(\n        <div>\n        <div className='menulist'>\n            {menuList}\n        </div>\n        <div className='menu'>\n            <RestaurantMenu isClicked={this.state.isClicked} menu = {this.state.menu} addToCart={this.addToCart} addRestaurant={this.addRestaurant} orderCompleted={this.state.orderCompleted}/>\n        </div>\n        <div className='cart'>\n            <h1>CART</h1>\n            <Cart cart={this.state.cart} restaurant={this.props.restaurant} checkout={this.addOrder}/>\n        </div>\n        </div>\n        \n        \n        \n    )\n    \n}\n}"]},"metadata":{},"sourceType":"module"}